{"ast":null,"code":"\"use strict\";\n\n// https://web.archive.org/web/20200601102344/https://tl.net/forum/sc2-tournaments/202139-superior-double-elimination-losers-bracket-seeding\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultMinorOrdering = exports.ordering = void 0;\nexports.ordering = {\n  'natural': array => [...array],\n  'reverse': array => [...array].reverse(),\n  'half_shift': array => [...array.slice(array.length / 2), ...array.slice(0, array.length / 2)],\n  'reverse_half_shift': array => [...array.slice(0, array.length / 2).reverse(), ...array.slice(array.length / 2).reverse()],\n  'pair_flip': array => {\n    const result = [];\n    for (let i = 0; i < array.length; i += 2) result.push(array[i + 1], array[i]);\n    return result;\n  },\n  'inner_outer': array => {\n    if (array.length === 2) return array;\n    const size = array.length / 4;\n    const innerPart = [array.slice(size, 2 * size), array.slice(2 * size, 3 * size)]; // [_, X, X, _]\n    const outerPart = [array.slice(0, size), array.slice(3 * size, 4 * size)]; // [X, _, _, X]\n    const methods = {\n      inner(part) {\n        return [part[0].pop(), part[1].shift()];\n      },\n      outer(part) {\n        return [part[0].shift(), part[1].pop()];\n      }\n    };\n    const result = [];\n    /**\n     * Adds a part (inner or outer) of a part.\n     *\n     * @param part The part to process.\n     * @param method The method to use.\n     */\n    function add(part, method) {\n      if (part[0].length > 0 && part[1].length > 0) result.push(...methods[method](part));\n    }\n    for (let i = 0; i < size / 2; i++) {\n      add(outerPart, 'outer'); // Outer part's outer\n      add(innerPart, 'inner'); // Inner part's inner\n      add(outerPart, 'inner'); // Outer part's inner\n      add(innerPart, 'outer'); // Inner part's outer\n    }\n    return result;\n  },\n  'groups.effort_balanced': (array, groupCount) => {\n    const result = [];\n    let i = 0,\n      j = 0;\n    while (result.length < array.length) {\n      result.push(array[i]);\n      i += groupCount;\n      if (i >= array.length) i = ++j;\n    }\n    return result;\n  },\n  'groups.seed_optimized': (array, groupCount) => {\n    const groups = Array.from({\n      length: groupCount\n    }, _ => []);\n    for (let run = 0; run < array.length / groupCount; run++) {\n      if (run % 2 === 0) {\n        for (let group = 0; group < groupCount; group++) groups[group].push(array[run * groupCount + group]);\n      } else {\n        for (let group = 0; group < groupCount; group++) groups[groupCount - group - 1].push(array[run * groupCount + group]);\n      }\n    }\n    return groups.flat();\n  },\n  'groups.bracket_optimized': () => {\n    throw Error('Not implemented.');\n  }\n};\nexports.defaultMinorOrdering = {\n  // 1 or 2: Not possible.\n  4: ['natural', 'reverse'],\n  8: ['natural', 'reverse', 'natural'],\n  16: ['natural', 'reverse_half_shift', 'reverse', 'natural'],\n  32: ['natural', 'reverse', 'half_shift', 'natural', 'natural'],\n  64: ['natural', 'reverse', 'half_shift', 'reverse', 'natural', 'natural'],\n  128: ['natural', 'reverse', 'half_shift', 'pair_flip', 'pair_flip', 'pair_flip', 'natural']\n};","map":{"version":3,"names":["exports","ordering","array","reverse","slice","length","result","i","push","size","innerPart","outerPart","methods","inner","part","pop","shift","outer","add","method","groups.effort_balanced","groupCount","j","groups.seed_optimized","groups","Array","from","_","run","group","flat","groups.bracket_optimized","Error","defaultMinorOrdering"],"sources":["../src/ordering.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}